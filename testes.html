<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardápio Digital</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f0f0f0; /* Cinza claro para fundo geral */
    color: #333; /* Texto principal cinza escuro */
}

header {
    background-color: #FFA500; /* Laranja mais suave */
    color: white;
    text-align: center;
    padding: 30px;
}

.category-menu {
    display: flex;
    justify-content: space-around;
    background-color: #222; /* Preto profundo */
    border-bottom: 2px solid #FFA500; /* Borda laranja suave */
    padding: 10px;
    position: sticky;
    top: 0;
}

.category-menu a {
    text-decoration: none;
    color: #FFA500; /* Laranja suave para o texto */
    font-weight: bold;
    cursor: pointer;
}

.category-menu a:hover {
    color: #ffffff; /* Branco ao passar o mouse */
}

.category-content {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #f5f5f5; /* Fundo cinza bem claro */
    z-index: 1000;
    display: none;
    padding: 20px;
    overflow-y: auto;
}

.category-content.active {
    display: block;
}

.category-content h2 {
    margin-top: 0;
    color: #FFA500; /* Título em laranja suave */
}

.category-content .back-btn {
    background-color: #FFA500; /* Botão laranja suave */
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 5px;
    font-size: 16px;
    margin-bottom: 20px;
}

.product-list {
    padding: 20px;
}

.product {
    background-color: white;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra leve */
}

.product-title {
    font-size: 18px;
    margin-bottom: 5px;
    color: #222; /* Título laranja suave */
}

.price {
    color: green; /* Um tom mais forte de laranja/verde para preços */
    margin-bottom: 10px;
}

.note {
    background-color: #ff4500; /* Fundo laranja suave */
    color: white;
    padding: 5px;
    text-align: center;
    border-radius: 5px;
}

.cart-toggle {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #222; /* Preto para contraste no botão */
    color: #FFA500; /* Texto laranja suave */
    text-align: center;
    padding: 10px;
    cursor: pointer;
    font-size: 16px;
    border-top: 2px solid orange;
    z-index: 2000;
}

.notification-bubble {
    position: absolute;
    top: 8px;
    right: 15px;
    background-color: #ff4500; /* Vermelho/laranja para destaque */
    color: white;
    border-radius: 50%;
    padding: 5px 10px;
    font-size: 12px;
    font-weight: bold;
    display: none; /* Inicialmente oculto */
}

.cart.open .notification-bubble {
    display: block; /* Exibe o balão quando o carrinho estiver aberto */
}

.cart {
    position: fixed;
    bottom: -100%;
    left: 0;
    right: 0;
    background-color: #222;
    border-top: 2px solid #FFA500; /* Borda laranja */
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    padding: 10px;
    max-height: 300px;
    overflow-y: auto;
    color: white;
}

.cart.open {
    bottom: 50px;
    z-index: 2000;
}

.cart h2 {
    text-align: center;
    margin: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #FFA500;
}

.cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close-cart {
    background-color: transparent;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #FFA500; /* Laranja suave */
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.remove-btn {
    background-color: #ff4500; /* Vermelho/laranja para o botão de remover */
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 5px;
}

.cart-total {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
}

#finalize-order {
    background-color: #FFA500; /* Botão laranja suave */
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 5px;
    width: 100%;
}

.checkout {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #1e1e1e; /* Fundo preto suave */
    border-top: 4px solid #FFA500; /* Borda laranja vibrante */
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3); /* Sombra mais forte */
    padding: 20px;
    z-index: 2000;
    color: white;
    border-radius: 15px 15px 0 0; /* Bordas arredondadas */
    transition: all 0.3s ease; /* Transição suave */
}

.checkout.open {
    display: block;
}

.checkout-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #FFA500; /* Borda na parte superior */
    padding-bottom: 15px;
    margin-bottom: 15px;
}

.checkout-header h2 {
    color: #FFA500; /* Cor laranja para o título */
    font-size: 24px;
}

.form-field {
    margin-bottom: 15px;
}

.form-field label {
    display: block;
    margin-bottom: 5px;
    font-size: 16px;
    color: #fff;
}

.form-field input, .form-field select {
    width: 100%;
    padding: 10px;
    border: 1px solid #333; /* Borda mais discreta */
    border-radius: 10px;
    background-color: #2e2e2e; /* Fundo escuro */
    color: #fff;
    font-size: 16px;
    outline: none;
    transition: border 0.3s ease; /* Transição para foco */
}

.form-field input:focus, .form-field select:focus {
    border: 1px solid #FFA500; /* Destaque no foco */
}

.total-display {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 20px;
    font-weight: bold;
    color: #FFA500;
}

#change-field {
    display: none;
}

#submit-order {
    width: 100%;
    padding: 15px;
    background-color: #FFA500; /* Cor laranja vibrante */
    color: white; /* Texto branco */
    border: none;
    border-radius: 12px; /* Bordas arredondadas */
    font-size: 18px; /* Tamanho da fonte */
    font-weight: bold; /* Texto em negrito */
    cursor: pointer;
    transition: all 0.3s ease; /* Transição suave */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Sombra para dar profundidade */
}

#submit-order:hover {
    background-color: #ff8c00; /* Cor mais escura ao passar o mouse */
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2); /* Sombra mais intensa no hover */
}

#submit-order:active {
    background-color: #e67600; /* Cor ainda mais escura ao clicar */
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.15); /* Sombra mais leve no clique */
    transform: translateY(2px); /* Efeito de clique que simula um pressionar */
}

#submit-order:focus {
    outline: none;
    box-shadow: 0 0 5px #FFA500; /* Destaque ao focar com o teclado */
}

.back-btn {
    background-color: #FFA500; /* Cor laranja vibrante */
    color: white; /* Texto branco */
    border: none;
    border-radius: 50%; /* Forma circular */
    width: 50px;
    height: 50px; /* Tamanho para criar o botão circular */
    font-size: 24px; /* Tamanho da seta */
    font-weight: bold; /* Seta mais destacada */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s ease; /* Transição suave */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Sombra para profundidade */
}

.back-btn:hover {
    background-color: #ff8c00; /* Cor mais escura ao passar o mouse */
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2); /* Sombra mais intensa */
}

.back-btn:active {
    background-color: #e67600; /* Cor ainda mais escura ao clicar */
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.15); /* Sombra reduzida ao clicar */
    transform: translateY(2px); /* Efeito de "pressionar" */
}

.back-btn:focus {
    outline: none;
    box-shadow: 0 0 5px #FFA500; /* Destaque ao focar com o teclado */
}

.add-btn {
    background-color: #28a745; /* Cor verde */
    color: white; /* Texto branco */
    border: none;
    padding: 9px;
    cursor: pointer;
    border-radius: 5px; /* Bordas arredondadas */
    font-size: 7px;
    transition: all 0.3s ease; /* Transição suave */
    transform: translateY(-2px); /* Mover 10px para cima */
}

.add-btn:hover {
    background-color: #218838; /* Verde mais escuro ao passar o mouse */
}

.add-btn:active {
    background-color: #1e7e34; /* Verde ainda mais escuro ao clicar */
    transform: translateY(2px); /* Efeito de clique */
}

.add-btn:focus {
    outline: none;
    box-shadow: 0 0 5px #28a745; /* Sombra verde ao focar */
}

.operating-hours {
    background-color: #1e1e1e;
    color: white;
    padding: 4px;
    font-size: 12px;
    position: absolute;
    top: 0;
    width: 98.2%;
    text-align: center;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    z-index: 999;
    margin-left: -7%;
}

.operating-hours span {
    margin-left: 10px;
}

.status {
    font-weight: bold;
    color: white;
    padding: 4px 15px;
    border-radius: 20px;
    margin-right: 10px;
    font-size: 14px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    text-transform: uppercase;
}

.status.open {
    background-color: #28a745; /* Verde suave para aberto */
}

.status.closed {
    background-color: #dc3545; /* Vermelho suave para fechado */
}
    </style>
</head>
<body>

    <header>
        <div class="operating-hours">
    Funcionamento: Seg a Sáb das 18h às 00h
    <span id="status" class="status">Fechado</span>
</div>
        <h1>Anuncie aqui!</h1>
    </header>

    <!-- Barra de categorias -->
    <div class="category-menu">
        <a onclick="scrollToCategory('pizzas')">Pizzas</a>
        <a onclick="scrollToCategory('esfihas')">Esfihas</a>
        <a onclick="scrollToCategory('sucos')">Sucos</a>
        <a onclick="scrollToCategory('refrigerantes')">Refrigerantes</a>
        <a onclick="scrollToCategory('combos')">Combos</a>
    </div>

    <!-- Lista de produtos por categoria -->
    <div class="product-list" id="pizzas" onclick="openCategory('pizzas')">
    <h2>Pizzas</h2>
    <div class="product">
        <span class="product-title">Pizzas ></span></span> </span>
        <span class="price">A partir de R$ 25,00</span>
        <div class="note">Não permitido adicionais</div>
    </div>
</div>

    <div class="product-list" id="esfihas" onclick="openCategory('esfirras')">
    <h2>Esfihas</h2>
    <div class="product">
        <span class="product-title">Esfihas Salgadas ></span></span>
        <span class="price">A partir de R$ 2,50</span>
        <div class="note">Não permitido adicionais</div>
    </div>
</div>

<div class="product-list" id="sucos" onclick="openCategory('sucos')">
    <h2>Sucos</h2>
    <div class="product">
        <span class="product-title">Sucos ></span></span>
        <span class="price">A partir de R$ 5,00</span>
        <div class="note">Não permitido adicionais</div>
    </div>
</div>
    
    <div id="category-container" class="category-content">
    <button class="back-btn" onclick="closeCategory()">←</button>
    <h2 id="category-title">Categoria</h2>

    <!-- Exibir o Total aqui dentro -->
    <div class="total-display">
        Total: <span id="total-value-top">R$ 0,00</span>
    </div>

    <div id="category-products"></div>
</div>

    <div class="cart-toggle" onclick="toggleCart()">
    Carrinho
    <div class="notification-bubble" id="cart-notification">0</div> <!-- Balão de notificação -->
</div>

    <div class="cart" id="cart">
        <div class="cart-header">
            <h2>Produtos Escolhidos</h2>
            <button class="close-cart" onclick="toggleCart()">X</button>
        </div>
        <ul class="cart-items"></ul>
        <div class="cart-total">
            <span>Total sem a taxa de entrega incluída:</span>
            <span id="total-value">R$ 0,00</span>
        </div>
        <button id="finalize-order">Finalizar Pedido</button>
    </div>

    <div class="checkout" id="checkout">
    <div class="checkout-header">
        <button class="back-btn" onclick="toggleCheckout()">←</button>
        <h2>Dados do Cliente</h2>
    </div>
    <div class="form-field">
        <label for="name">Nome:</label>
        <input type="text" id="name" placeholder="Seu nome">
    </div>
    <div class="form-field">
        <label for="cep">CEP (Opcional):</label>
        <input type="text" id="cep" placeholder="CEP" onblur="buscarCEP()">
    </div>
    <div class="form-field">
        <label for="rua">Rua:</label>
        <input type="text" id="rua" placeholder="Sua rua">
    </div>
    <div class="form-field">
        <label for="bairro">Bairro:</label>
        <input type="text" id="bairro" placeholder="Seu bairro">
    </div>
    <div class="form-field">
        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" placeholder="Sua cidade">
    </div>
    <div class="form-field">
        <label for="ponto_referencia">Ponto de Referência:</label>
        <input type="text" id="ponto_referencia" placeholder="Ponto de referência">
    </div>

    <!-- Formas de pagamento -->
    <div class="form-field">
        <label for="payment-method">Forma de pagamento:</label>
        <select id="payment-method" onchange="toggleChangeField()">
            <option value="pix">Pix</option>
            <option value="cartao">Cartão de Crédito (Maquininha)</option>
            <option value="dinheiro">Dinheiro</option>
        </select>
    </div>

    <!-- Campo de troco (apenas para pagamento em dinheiro) -->
    <div id="change-field" class="form-field" style="display: none;">
        <label for="change-for">Troco para:</label>
        <input type="number" id="change-for" placeholder="Digite o valor para o troco">
    </div>

    <button id="submit-order">Enviar Pedido</button>
</div>

    <script>
        let cart = [];
let total = 0;
let totalItems = 0; // Contador de itens no carrinho

// Função para rolar até a categoria
function scrollToCategory(categoryId) {
    document.getElementById(categoryId).scrollIntoView({ behavior: 'smooth' });
}

// Função para atualizar a quantidade de produtos no carrinho
function updateQuantity(index, category, change) {
    const product = products[category][index];
    const quantityElement = document.getElementById(`quantity-${category}-${index}`);
    let quantity = parseInt(quantityElement.innerText);

    // Atualiza a quantidade
    quantity += change;
    if (quantity < 0) {
        quantity = 0;
    }
    
    quantityElement.innerText = quantity;

    // Atualiza o carrinho
    updateCart(product, quantity);
}

// Função para adicionar/remover do carrinho
function updateCart(product, quantity) {
    const cartItemIndex = cart.findIndex(item => item.name === product.name);

    if (quantity === 0) {
        // Remove o item se a quantidade for 0
        if (cartItemIndex !== -1) {
            totalItems -= cart[cartItemIndex].quantity; // Diminui o total de itens
            cart.splice(cartItemIndex, 1);
        }
    } else {
        if (cartItemIndex !== -1) {
            // Atualiza a quantidade do item no carrinho
            totalItems += quantity - cart[cartItemIndex].quantity; // Ajusta o total de itens
            cart[cartItemIndex].quantity = quantity;
        } else {
            // Adiciona o item ao carrinho
            cart.push({ ...product, quantity });
            totalItems += quantity; // Incrementa o total de itens
        }
    }

    renderCart();
    updateCartNotification(); // Atualiza o balão de notificação
}

// Função para renderizar o carrinho
function renderCart() {
    const cartItems = document.querySelector('.cart-items');
    cartItems.innerHTML = '';
    total = 0;

    cart.forEach(item => {
        const li = document.createElement('li');
        li.classList.add('cart-item');
        li.innerHTML = `
            ${item.name} - R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')} (Qtd: ${item.quantity})
            <button class="remove-btn" onclick="removeItem('${item.name}')">X</button>
        `;
        cartItems.appendChild(li);

        // Calcula o total
        total += item.price * item.quantity;
    });

    document.getElementById('total-value').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
    document.getElementById('total-value-top').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
}

// Função para remover itens do carrinho ao clicar no botão "Remover"
function removeCartItem(index) {
    cart.splice(index, 1);  // Remove o item do array do carrinho
    renderCart();  // Atualiza a exibição do carrinho
}

// Função para atualizar o balão de notificação
function updateCartNotification() {
    const notification = document.getElementById('cart-notification');
    
    if (totalItems > 0) {
        notification.style.display = 'block';
        notification.innerText = totalItems;
    } else {
        notification.style.display = 'none'; // Esconde o balão se não houver itens
    }
}

// Função para abrir e fechar a tela de checkout
function toggleCheckout() {
    const cartElement = document.getElementById('cart');
    const checkoutElement = document.getElementById('checkout');
    
    // Fecha o carrinho se estiver aberto e abre o checkout
    if (cartElement.classList.contains('open')) {
        cartElement.classList.remove('open'); // Fecha o carrinho
        checkoutElement.classList.add('open'); // Abre o checkout
    } else {
        // Alterna entre o estado aberto e fechado do checkout
        checkoutElement.classList.toggle('open');
    }
}

// Finalizar o pedido e abrir a tela de checkout
document.getElementById('finalize-order').addEventListener('click', () => {
    toggleCheckout();
});

// Função para abrir e fechar o carrinho
function toggleCart() {
    const cartElement = document.getElementById('cart');
    const checkoutElement = document.getElementById('checkout');
    
    // Se o checkout estiver aberto, fecha-o antes de abrir o carrinho
    if (checkoutElement.classList.contains('open')) {
        checkoutElement.classList.remove('open');
    }
    
    cartElement.classList.toggle('open');
}

// Função para exibir o campo de troco se a forma de pagamento for "Dinheiro"
function toggleChangeField() {
    const paymentMethod = document.getElementById('payment-method').value;
    const changeField = document.getElementById('change-field');
    if (paymentMethod === 'dinheiro') {
        changeField.style.display = 'block';
    } else {
        changeField.style.display = 'none';
    }
}

// Enviar o pedido via WhatsApp
document.getElementById('submit-order').addEventListener('click', () => {
    const name = document.getElementById('name').value;
    const cep = document.getElementById('cep').value;
    const rua = document.getElementById('rua').value;
    const bairro = document.getElementById('bairro').value;
    const cidade = document.getElementById('cidade').value;
    const pontoReferencia = document.getElementById('ponto_referencia').value;
    const paymentMethod = document.getElementById('payment-method').value;
    const changeFor = document.getElementById('change-for').value; // Valor do troco

    if (name === '' || rua === '' || bairro === '' || cidade === '') {
        alert('Por favor, preencha todos os campos obrigatórios!');
        return;
    }

    let message = `Pedido:\n`;
    cart.forEach(item => {
        message += `${item.name} - R$ ${item.price.toFixed(2).replace('.', ',')} (Qtd: ${item.quantity})\n`;
    });
    message += `\nTotal: R$ ${total.toFixed(2).replace('.', ',')}\n`;
    message += `\nNome: ${name}\nCEP: ${cep}\nRua: ${rua}\nBairro: ${bairro}\nCidade: ${cidade}\nPonto de Referência: ${pontoReferencia}\n`;

    // Adiciona a forma de pagamento
    message += `\nForma de Pagamento: ${paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1)}`;

    // Se a forma de pagamento for "Dinheiro", adiciona o valor do troco
    if (paymentMethod === 'dinheiro' && changeFor !== '') {
        message += `\nTroco para: R$ ${parseFloat(changeFor).toFixed(2).replace('.', ',')}`;
    }

    const whatsappUrl = `https://wa.me/5519998133764?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
});

// Função para buscar o endereço pelo CEP via API
function buscarCEP() {
    const cep = document.getElementById('cep').value.replace(/\D/g, '');

    if (cep !== "") {
        const validacep = /^[0-9]{8}$/;

        if (validacep.test(cep)) {
            fetch(`https://viacep.com.br/ws/${cep}/json/`)
                .then(response => response.json())
                .then(data => {
                    if (!("erro" in data)) {
                        document.getElementById('rua').value = data.logradouro;
                        document.getElementById('bairro').value = data.bairro;
                        document.getElementById('cidade').value = data.localidade;
                    } else {
                        alert("CEP não encontrado.");
                    }
                })
                .catch(error => {
                    console.error("Erro ao buscar o CEP: ", error);
                    alert("Erro ao buscar o CEP.");
                });
        } else {
            alert("Formato de CEP inválido.");
        }
    }
}

// Exemplo de produtos por categoria
const products = {
    esfirras: [
        { name: 'Esfiha Carne', price: 2.50 },
        { name: 'Esfiha Mussarela', price: 4.00 }, 
        { name: 'Esfiha Costela', price: 5.50 }
    ],
    pizzas: [
        { name: 'Pizza Margherita', price: 25.00 },
        { name: 'Pizza Calabresa', price: 27.00 },
        { name: 'Pizza Portuguêsa', price: 35.00 }
    ], 
    sucos: [
        { name: 'Suco de uva', price: 3.00 },
        { name: 'Suco de laranja', price: 4.00 }
    ]
};

// Função para abrir o container de categoria e exibir os produtos com botões de + e -
function openCategory(category) {
    const categoryTitle = document.getElementById('category-title');
    const categoryProducts = document.getElementById('category-products');
    
    // Define o título da categoria
    categoryTitle.innerText = category.charAt(0).toUpperCase() + category.slice(1);
    
    // Limpa os produtos anteriores
    categoryProducts.innerHTML = '';

    // Insere os produtos da categoria selecionada
    products[category].forEach((product, index) => {
        const productElement = document.createElement('div');
        productElement.classList.add('product');
        productElement.innerHTML = `
            <span class="product-title">${product.name}</span>
            <span class="price">R$ ${product.price.toFixed(2).replace('.', ',')}</span>
            <button class="remove-btn" onclick="updateQuantity(${index}, '${category}', -1)">-</button>
            <span id="quantity-${category}-${index}">0</span>
            <button class="add-btn" onclick="updateQuantity(${index}, '${category}', 1)">+</button>
        `;
        categoryProducts.appendChild(productElement);
    });

    // Exibe o container de categoria
    document.getElementById('category-container').classList.add('active');
}

// Função para fechar o container de categoria
function closeCategory() {
    document.getElementById('category-container').classList.remove('active');
}

// Função para remover itens do carrinho
function removeItem(productName) {
    const cartItemIndex = cart.findIndex(item => item.name === productName);

    if (cartItemIndex !== -1) {
        totalItems -= cart[cartItemIndex].quantity; // Diminui a quantidade total de itens no carrinho
        cart.splice(cartItemIndex, 1); // Remove o item do array do carrinho
    }

    renderCart(); // Atualiza a exibição do carrinho
    updateCartNotification(); // Atualiza o balão de notificação
}

function checkIfOpen() {
    const now = new Date();
    const dayOfWeek = now.getDay(); // 0 = Domingo, 6 = Sábado
    const hour = now.getHours();

    const isOpen = (dayOfWeek >= 1 && dayOfWeek <= 6) && (hour >= 18 && hour < 24); // Aberto de Seg-Sáb das 18h às 00h

    const statusElement = document.getElementById('status');
    if (isOpen) {
        statusElement.innerText = "Aberto";
        statusElement.classList.add('open');
        statusElement.classList.remove('closed');
    } else {
        statusElement.innerText = "Fechado";
        statusElement.classList.add('closed');
        statusElement.classList.remove('open');
    }
}

// Verifica o status assim que a página carrega
window.onload = checkIfOpen;
    </script>
</body>
</html>